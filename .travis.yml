language: php
php:
- '7.0'
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: SopD2tEMjUfySML1J00+OZ59hVFe4Oh1SreYZtON3THfcppq4XNp1PF/8VMCZfgBRlTh2PytfSttc5fV5CoRPkkv1M/3frpEDmrWv+L4JLkVxayNtnIuzslZzyBusE7UMZ65k+xA/sJOLs/EelwyRLWN7dcLeQoPQ0iLwAaBIRrjEiXQH93i35NGuXEq4QnJA9VCzKNjPQpp4K2Un9slm8kbtW1KK6Ry+08q6heBfoSYlP/X77tpMNM9aSNtBfxrNtxUm5qSJxWQpOVxfVh57jdIJHG6lCtf6878em3PqjM0wgl0ZnBoIUwKT8jbHPKHdligURWgmFshWlsZNbd8vLL94jQ4LhG1ANtsMj/P+orgrXxd/iVa5ydhOYFcgZSpAAOAhnHisnefg0oa2LG1dLuTiobcRJyUcBfqrBriBb1t6Bv9KyivjUdQnFb24xAT4YISVadvjONr23+7sB9S1RhbztLSxBJfHvHpApDls6PiJRSKpeuJMJXh8Ohyt3+mtIj3jujtqvulQWQdJhchm2r0Bls+YtTjJJXq2Gj/54Ua4SKgIJj2S8TedcQmLnNwHvRfG+ANHFf6q3cRS1N54ZiTToRjJhOMLL8ETzoMXqsYF12+ebSyS5swvo1jVGvh4LILUnuVAXl1lfzhKoeni78eJ3ZfabefUKG+gpHigeo=
  - secure: uP/8mODIi5PSZjrlPAevZKdF65zJ/tzok6G1MgfOVyNlLZY2NedUvzmR3QUaQ2qF644sstaWrZ/WfQZKoPZAdO3OzUJcQj19Tq67xF8ofvIvI1dl0mNeEyySOlt/ne1QcsL6zQ8aDeJNhmEoOChTieA02yVNHPyhRmiP/c9CJd8HfeE3Up984YPUEeddbjPlq+Z5+v5aG8yDZopaRQuOyGx1OUxJkrVf9MMPFVSqFn7WesboNluBNW71pnIrr5fNAhlxfk8SrLuaEUcX9A7k9kS9rvDsrocWg7N0nEaK6z8RPfNmuirrBOYyw+sD8grWwxQABfKFsG55Pv1Z0vtTAj9S5u3u2L6M2ErDXo3hoctAKEIyxHKZHmpua3artP7XB4AdQxANSwxldwjJXXT7EgLME51YC1WnV00W+k5p+L/KafZr54K60TCvowZIzHk+8g1M8QvVrQcMhSjMG3LMmxij+Y4CKPfctsE0LnrTrN+fMOMpplSbbcpNSV8/HiHIruwNhGqopMPho1zwVbJhieUsVrMBkrqNh36tB0xCHWfR5j6dn9Gbnm61qYCTxnJwmGe1cSZ1Bml5aH/04aI1T/RnHdgT8SS+XbDxVlKvfPBtkHoYpS185TpshZI5pDm2T1z+WPrjsmfpCKVFE9WzMK58YsB/V4UCSRnHKPZf+4M=
  - secure: OE15qo1rzZmzyvbKXQ/fxzMpaQbdfFGlvp78ICl99DqI0iAtVhgII3fxdKzhVaM33vG0OoFXnB0odBnpHngsDgVIosiqKI7JRAu5JACFUD/4rECdr0U8BDl8wKucf1hiK7DaYaBD/d5sGLMI4lW37jOHTpapBT1VHEftX0aNes5LpEJHm/kXGuH0AQTffPPf5DnX7rUdYHvwn3C7m2eMC91xwqxjQsGnWKY6Z3c/r7+G8OZ7vkzKX+o9pZjmvuJVrkNC8XrDXKf4v/9x4Umww+q+JLQ2p0N/yN5kvDfH0r2kp2pcaYzeZLhM8+ta2ISujpLKAt66UbHi/oDpxAWPZ3KgEdSC0bWJDJeFNe9Xy/N9Pig9EfuiL4qsIRmLh2OG8gqP18Q16kD2Tjh+MpPSufFQAAkiQSzqc9ZVsoKUjvRlC3AZxRweA6pPj/lHgJwLppghESBhCvYpVFyFLGFH4mx02mct6yQ7oa3H7V9zs1RkQFTo/95k0YBoin3JgIRST7si25I2dtT/mYXrIMf4OYLXP3RMnaNlqkdJbNX9svPljMKoHIVxXYKX8z0WyTSDl091tKgxWRQ6zEqUJvVzEVSgoQY0LHctdb3iXQnF+79FViZcuMiN3PB5pfmuQ2p/BdufAMf7/2dSWRJ6EKOMEAUbCakJFYqvWRFzNMnUg24=
script:
- ls -alh
- docker login -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=netsyos/nginx
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
after_success:
- date
notifications:
  slack:
    secure: mnM6upLi7KimrYc6AXdZsD4lmxnVXZ2VaJl2XxfPi45uJ3JRfUqv4dhYUdE/k7d7HNf5Yx10ZEQyrAUkOqlAASr1zu8MDqvaThA99s6SX6jJ5vkJkXnGnpqUUw9vp8zkZ8ynM9YmvVWeb+rP7fxVdmXKeqWkzFgmLvMwKyz6PNaGBcAMaGLada4Iqzv8ZdpufPOh0vLsulsq9yRdW30KIz4E34TjOtu1eJmjyhvlc0f+5y12w0DdBlHbYPsu8DuWAcTI17CMRdIjlBV+jUa/1sxG9MEn9J9klUoaEn7ehbUwBQl4RlwUZ383+I4cRx8HK7dx2AdZ3BvtHQRuD9rz1YCSzRRE6+bIm04/crfx1yKv7h2bKdvkOPDG3HewLqLmlU4g9WAPADnLvzjwvdvRXIaIBI1wb1btWjlQ3kyxIlNXttNGPVaTM+cBr9aOO9HRjk4AqTtoMorIWGJ8FicSJxHCIZHzJgTiUGOLwu76vkOx8Sw1fWkiDg8Jp28rtRgZjbHw7vFTndEttE4Rl8+xg1CLZsYIPU+FjxUCnoRi/GgnhKwbQNJ24wzZAeUiu1yVHjp4Y5Ee3UBN2ypW4clo0juAEpjo+UypgEdWaUzK+gTMFELD36woXJbDUO20wWal2d5DyNDH0AdpvP9mEX/W0ppgT4GIPvStBimpqCm1Pxo=
